# Election Management System - Project Context

**Kuwait Oil Company - Complete Project Context**

**Last Updated**: October 27, 2025  
**Status**: âœ… **Backend Complete (10/10), Frontend In Progress**

---

## ğŸ“– Complete Documentation

**âš¡ PRIMARY NAVIGATION**: [`docs/INDEX.md`](../../docs/INDEX.md) â­

### Documentation Structure

```
docs/
â”œâ”€â”€ INDEX.md â­                          # Main navigation hub
â”œâ”€â”€ README.md                            # Documentation overview
â”‚
â”œâ”€â”€ getting-started/                     # New developer onboarding
â”œâ”€â”€ standards/                           # Development standards
â”œâ”€â”€ backend/                             # Backend architecture
â”œâ”€â”€ reference/                           # Quick references
â”œâ”€â”€ archive/                             # Historical documentation
```

### Key Documentation Files

| Document | Purpose | Lines |
|----------|---------|-------|
| **[INDEX.md](../../docs/INDEX.md)** | Complete navigation | 388 |
| **[Backend Standards](../../docs/standards/BACKEND-STANDARDIZATION-GUIDE.md)** | Backend guide | 894 |
| **[Frontend Standards](../../docs/standards/FRONTEND-STANDARDIZATION-GUIDE.md)** | Frontend guide | 1,296 |
| **[API Integration](../../docs/standards/API-INTEGRATION-GUIDE.md)** | API patterns | 646 |
| **[Full Stack Integration](../../docs/standards/FRONTEND-BACKEND-INTEGRATION.md)** | Integration | 612 |
| **[App Structure](../../docs/backend/APP-STRUCTURE.md)** | Architecture | 401 |

---

## ğŸ—ï¸ Project Overview

### What We're Building

**Election Management System** for Kuwait Oil Company - A comprehensive web-based platform for managing elections, from guarantee collection through vote counting and results.

### Target Users
- **Super Admins**: Full system access
- **Admins**: Operational management
- **Supervisors**: Team oversight
- **Staff**: Guarantee collectors
- **Observers**: Read-only access

---

## ğŸ› ï¸ Technology Stack

### Backend (10/10 Score âœ…)
- **Language**: Python 3.11+
- **Framework**: Django 4.2 + Django REST Framework
- **Database**: PostgreSQL 15+ (SQLite for development)
- **Authentication**: JWT (djangorestframework-simplejwt)
- **API Documentation**: DRF Spectacular
- **Status**: **Complete & Standardized**

### Frontend (In Progress)
- **Language**: TypeScript 5.x
- **Framework**: React 18.x with Hooks
- **UI Library**: Material-UI (MUI) v5
- **State Management**: React Context API + Custom Hooks
- **HTTP Client**: Axios with interceptors
- **Routing**: React Router v6
- **Form Management**: React Hook Form + Yup validation
- **Build Tool**: Vite

---

## ğŸ“ Project Structure

```
election/
â”œâ”€â”€ backend/                    # Django backend
â”‚   â”œâ”€â”€ apps/                   # Django applications
â”‚   â”‚   â”œâ”€â”€ account/           # User authentication & management
â”‚   â”‚   â”œâ”€â”€ elections/         # Election configuration (PLURAL)
â”‚   â”‚   â”œâ”€â”€ electors/          # Elector database
â”‚   â”‚   â”œâ”€â”€ candidates/        # Candidates & parties
â”‚   â”‚   â”œâ”€â”€ guarantees/        # Guarantee collection
â”‚   â”‚   â”œâ”€â”€ attendees/         # Attendance tracking (PLURAL)
â”‚   â”‚   â”œâ”€â”€ voting/            # Voting operations & results
â”‚   â”‚   â”œâ”€â”€ reports/           # Analytics & reporting
â”‚   â”‚   â””â”€â”€ utils/             # Shared utilities
â”‚   â”œâ”€â”€ core/                  # Django project settings
â”‚   â””â”€â”€ requirements.txt       # Python dependencies
â”‚
â”œâ”€â”€ frontend/                  # React frontend
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/              # API integration layer
â”‚   â”‚   â”œâ”€â”€ components/       # React components
â”‚   â”‚   â”œâ”€â”€ views/            # Page-level components
â”‚   â”‚   â”œâ”€â”€ hooks/            # Custom React hooks
â”‚   â”‚   â”œâ”€â”€ contexts/         # React Context providers
â”‚   â”‚   â”œâ”€â”€ types/            # TypeScript type definitions
â”‚   â”‚   â””â”€â”€ utils/            # Utility functions
â”‚   â””â”€â”€ package.json          # Node dependencies
â”‚
â””â”€â”€ docs/                      # â­ ALL DOCUMENTATION
    â”œâ”€â”€ INDEX.md               # Main navigation hub
    â”œâ”€â”€ getting-started/       # Onboarding
    â”œâ”€â”€ standards/             # Development standards
    â”œâ”€â”€ backend/               # Backend architecture
    â”œâ”€â”€ reference/             # Quick references
    â””â”€â”€ archive/               # Historical docs
```

---

## ğŸ¯ Backend Apps Structure

### Core Apps

1. **account** - User authentication & management
   - Custom user model with 4 roles
   - JWT authentication
   - Permission system
   - User CRUD operations

2. **elections** (PLURAL) - Election configuration
   - Election model with 5 statuses
   - Committee management
   - Voting modes configuration
   - âš ï¸ **Note**: Renamed from `election` in Oct 2025

3. **electors** - Voter database
   - 7-part name parsing
   - CSV import/export
   - Advanced search (13 fields)
   - Committee assignment

4. **candidates** - Candidates & parties
   - Party management
   - Candidate registration
   - Party affiliations
   - **Note**: Separated from `voting` in Oct 2025

5. **guarantees** - Guarantee collection
   - Guarantee tracking
   - Group management
   - Status tracking (STRONG/MEDIUM/WEAK)
   - Team dashboard

6. **attendees** (PLURAL) - Attendance tracking
   - Mark attendance
   - Committee-based tracking
   - Statistics and reporting
   - âš ï¸ **Note**: Renamed from `attendance` in Oct 2025

7. **voting** - Voting operations
   - Vote count entry
   - Results aggregation
   - Final results compilation
   - Audit trail

8. **reports** - Analytics & reporting
   - Multi-level dashboards
   - Coverage analysis
   - Accuracy reports
   - Performance metrics

9. **utils** - Shared utilities
   - `APIResponse` class (standardized responses)
   - `StandardResponseMixin` (ViewSet mixin)
   - Custom permissions
   - Base models

---

## ğŸ”‘ Backend Standards (10/10 Score)

### API Response Format

**ALL backend responses use this format**:
```python
{
  "status": "success|error",
  "data": {},
  "message": "...",
  "errors": {},
  "meta": {
    "timestamp": "...",
    "request_id": "..."
  }
}
```

### ViewSet Pattern

**ALL ViewSets use `StandardResponseMixin`**:
```python
class MyViewSet(StandardResponseMixin, viewsets.ModelViewSet):
    queryset = MyModel.objects.all()
    serializer_class = MySerializer
    permission_classes = [IsAuthenticated]
```

### URL Structure

**RESTful with plural resource names**:
- `/api/elections/` âœ…
- `/api/electors/` âœ…
- `/api/candidates/` âœ…
- `/api/attendees/` âœ…
- `/api/guarantees/` âœ…

---

## ğŸ¨ Frontend Patterns

### API Integration

**Service layer pattern**:
```typescript
class ElectionsService extends BaseService<Election> {
  constructor() {
    super('/elections');  // Plural endpoint
  }
  
  async getCurrent(): Promise<APIResponse<Election>> {
    const response = await apiClient.get(`${this.basePath}/current/`);
    return response.data;
  }
}
```

### Component Pattern

**Functional components with hooks**:
```typescript
export const MyComponent: React.FC<MyComponentProps> = ({
  prop1,
  prop2,
}) => {
  const { data, loading, error } = useApi(
    () => service.getData()
  );
  
  if (loading) return <LoadingSpinner />;
  if (error) return <ErrorAlert error={error} />;
  
  return <div>{/* JSX */}</div>;
};
```

### State Management

**Context API + Custom Hooks**:
```typescript
const { user, login, logout } = useAuth();
const { data, loading, error } = useApi(() => service.get());
const { mutate, loading } = useMutation(service.create);
```

---

## ğŸš¨ Important: October 2025 API Changes

### Backend (COMPLETE âœ…)

**Apps renamed to plural**:
- `apps.election` â†’ `apps.elections` âœ…
- `apps.attendance` â†’ `apps.attendees` âœ…
- `apps.candidates` created (separated from voting) âœ…

**Endpoints updated**:
- `/api/election/` â†’ `/api/elections/` âœ…
- `/api/attendance/` â†’ `/api/attendees/` âœ…

### Frontend (IN PROGRESS âš ï¸)

**Action Required**: Update frontend to use new endpoints

**Migration Guide**: `docs/reference/MIGRATION-CHECKLIST.md`

**Tasks**:
- [ ] Update `/api/election/` â†’ `/api/elections/`
- [ ] Update `/api/attendance/` â†’ `/api/attendees/`
- [ ] Update imports and references
- [ ] Test all API integrations

---

## ğŸ“Š Development Status

### Backend Status

| Phase | Status | Score |
|-------|--------|-------|
| **Phase 1**: Authentication | âœ… Complete | 10/10 |
| **Phase 2**: Elections & Electors | âœ… Complete | 10/10 |
| **Phase 3**: Guarantees | âœ… Complete | 10/10 |
| **Phase 4**: Reports | âœ… Complete | 10/10 |
| **Phase 5**: Voting | âœ… Complete | 10/10 |
| **Refactoring**: Candidates | âœ… Complete | 10/10 |
| **Refactoring**: Elections (plural) | âœ… Complete | 10/10 |
| **Refactoring**: Attendees (plural) | âœ… Complete | 10/10 |
| **Standardization** | âœ… Complete | **10/10** |

**Overall Backend**: âœ… **PRODUCTION READY**

### Frontend Status

| Component | Status |
|-----------|--------|
| **Standards** | âœ… Established |
| **Component Library** | âœ… Documented |
| **API Integration** | âœ… Documented |
| **Migration Tasks** | âš ï¸ In Progress |

---

## ğŸ“ Development Workflow

### For Backend Development

1. Read: `docs/standards/BACKEND-STANDARDIZATION-GUIDE.md`
2. Reference: `docs/reference/QUICK-REFERENCE.md`
3. Check: `docs/backend/APP-STRUCTURE.md`
4. Follow: `APIResponse` and `StandardResponseMixin` patterns

### For Frontend Development

1. Read: `docs/standards/FRONTEND-STANDARDIZATION-GUIDE.md`
2. Reference: `docs/reference/COMPONENT-LIBRARY.md`
3. Check: `docs/standards/API-INTEGRATION-GUIDE.md`
4. Follow: Service layer and custom hooks patterns

### For Full Stack

1. Read: `docs/standards/STANDARDS-SUMMARY.md`
2. Read: `docs/standards/FRONTEND-BACKEND-INTEGRATION.md`
3. Follow both backend and frontend standards
4. Ensure type consistency across stack

---

## ğŸ”’ Authentication & Permissions

### User Roles (Hierarchical)

1. **SUPER_ADMIN** - Full system access
2. **ADMIN** - Operational management
3. **SUPERVISOR** - Team oversight
4. **STAFF** - Guarantee collection
5. **OBSERVER** - Read-only access

### Permission Classes

- `IsAuthenticated` - Must be logged in
- `IsAdminOrAbove` - Admin, Super Admin
- `IsSupervisorOrAbove` - Supervisor, Admin, Super Admin
- `IsAssignedToCommittee` - For committee-specific operations

### JWT Authentication

- Access token (short-lived)
- Refresh token (long-lived)
- Automatic refresh on frontend
- Token-based API authorization

---

## ğŸ“ Code Quality Standards

### Backend Standards (10/10)

âœ… **API Response Format** - All use `APIResponse`  
âœ… **ViewSet Standards** - All use `StandardResponseMixin`  
âœ… **URL Structure** - RESTful, plural endpoints  
âœ… **Permissions** - Consistent permission system  
âœ… **Error Handling** - Standardized error responses  
âœ… **Audit Trail** - Automatic user tracking  
âœ… **Documentation** - Complete docstrings

### Frontend Standards (Established)

âœ… **Component Patterns** - Functional + hooks  
âœ… **API Integration** - Service layer  
âœ… **State Management** - Context + custom hooks  
âœ… **TypeScript** - Full type safety  
âœ… **Form Handling** - React Hook Form + Yup  
âœ… **Error Boundaries** - Graceful error handling  
âœ… **Documentation** - JSDoc comments

---

## ğŸ§ª Testing Standards

### Backend Testing

```python
# Unit tests
python manage.py test apps.elections

# With coverage
coverage run --source='.' manage.py test
coverage report
```

### Frontend Testing

```bash
# Unit tests
npm test

# With coverage
npm test -- --coverage

# Watch mode
npm test -- --watch
```

---

## ğŸš€ Running the Project

### Backend

```bash
cd backend
.\venv\Scripts\activate  # Windows
source venv/bin/activate # Linux/Mac
python manage.py runserver
# Access: http://localhost:8000
```

### Frontend

```bash
cd frontend
npm install
npm run dev
# Access: http://localhost:3000
```

---

## ğŸ”— API Endpoints Reference

### Authentication
- `POST /api/auth/login/` - User login
- `POST /api/auth/logout/` - User logout
- `POST /api/auth/refresh/` - Refresh token

### Elections (PLURAL)
- `GET /api/elections/` - List elections
- `GET /api/elections/current/` - Current election
- `GET /api/elections/{id}/` - Election detail
- `GET /api/elections/committees/` - List committees

### Electors
- `GET /api/electors/` - List electors
- `GET /api/electors/search/` - Search electors
- `POST /api/electors/import/` - Import CSV
- `GET /api/electors/export/` - Export CSV

### Candidates
- `GET /api/candidates/` - List candidates
- `GET /api/candidates/parties/` - List parties
- `POST /api/candidates/` - Create candidate

### Attendees (PLURAL)
- `GET /api/attendees/` - List attendance
- `POST /api/attendees/mark_attendance/` - Mark attendance
- `GET /api/attendees/statistics/{code}/` - Committee stats

### Guarantees
- `GET /api/guarantees/` - List guarantees
- `POST /api/guarantees/` - Create guarantee
- `GET /api/guarantees/statistics/` - Statistics

### Voting
- `POST /api/voting/vote-counts/` - Enter votes
- `GET /api/voting/results/` - Get results

### Reports
- `GET /api/reports/dashboard/personal/` - Personal dashboard
- `GET /api/reports/dashboard/supervisor/` - Supervisor dashboard
- `GET /api/reports/dashboard/admin/` - Admin dashboard

---

## ğŸ“š Learning Resources

### For New Developers

**Day 1-2**: 
- `docs/getting-started/00-QUICK-START.md`
- `docs/getting-started/01-PROJECT-OVERVIEW.md`
- `docs/getting-started/02-INSTALLATION.md`

**Day 3-5**:
- Backend: `docs/standards/BACKEND-STANDARDIZATION-GUIDE.md`
- Frontend: `docs/standards/FRONTEND-STANDARDIZATION-GUIDE.md`

**Week 2**:
- `docs/standards/STANDARDS-SUMMARY.md`
- `docs/backend/APP-STRUCTURE.md`
- Start small tasks

### For Active Developers

**Daily References**:
- Backend: `docs/reference/QUICK-REFERENCE.md`
- Frontend: `docs/reference/COMPONENT-LIBRARY.md`
- Commands: `docs/reference/03-COMMANDS.md`

**Navigation**: `docs/INDEX.md` for everything

---

## ğŸ¯ Current Priorities

### High Priority âš ï¸

1. **Frontend API Migration** (In Progress)
   - Update endpoints to plural format
   - Test all integrations
   - See: `docs/reference/MIGRATION-CHECKLIST.md`

### Medium Priority

1. **Frontend Development**
   - Follow established patterns
   - Use component library
   - Implement features per standards

### Low Priority

1. **Documentation**
   - Keep updated as code changes
   - Add examples as needed
   - Archive completed work

---

## ğŸ† Project Achievements

### Backend
- âœ… **5 Complete Phases** - All features implemented
- âœ… **10/10 Standardization** - Fully audited
- âœ… **3 Major Refactorings** - Clean architecture
- âœ… **Complete API** - RESTful endpoints
- âœ… **Production Ready** - Tested and documented

### Documentation
- âœ… **8,000+ Lines** - Comprehensive coverage
- âœ… **80+ Documents** - Complete system
- âœ… **Single Source** - All in `docs/`
- âœ… **Complete Index** - Easy navigation
- âœ… **Preserved History** - 63 files archived

---

## ğŸ”§ Common Commands

### Backend

```bash
# Run server
python manage.py runserver

# Make migrations
python manage.py makemigrations

# Apply migrations
python manage.py migrate

# Create superuser
python manage.py createsuperuser

# Run tests
python manage.py test
```

### Frontend

```bash
# Install dependencies
npm install

# Run dev server
npm run dev

# Build for production
npm run build

# Run tests
npm test

# Lint code
npm run lint
```

---

## ğŸ“ Getting Help

### Documentation
- **Start**: `docs/INDEX.md`
- **Backend**: `docs/standards/BACKEND-STANDARDIZATION-GUIDE.md`
- **Frontend**: `docs/standards/FRONTEND-STANDARDIZATION-GUIDE.md`
- **API**: `docs/standards/API-INTEGRATION-GUIDE.md`

### Common Issues
- Check relevant standardization guide
- Search `docs/INDEX.md`
- Ask in team chat
- Create GitHub issue

---

## âœ… Before You Start

**Read these first**:
1. [`docs/INDEX.md`](../../docs/INDEX.md) - Complete navigation
2. [`docs/README.md`](../../docs/README.md) - Documentation hub
3. Your role's standardization guide
4. Relevant quick reference guide

---

**Last Updated**: October 27, 2025  
**Maintained By**: Development Team  
**Status**: âœ… **Backend Production Ready, Frontend In Progress**

---

**Remember: Always start with `docs/INDEX.md` for navigation!** â­
